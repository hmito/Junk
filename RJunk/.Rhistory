for(month.i in 1:length(head)){
success=TRUE
year = start_year + as.integer((start_month+month.i-2)/12)
month = (start_month+month.i-2)%%12+1
days = 1:numberOfDays(year,month)
#month check
adjust = 0
for(adjust in 0:3){
adjust.ok = TRUE
for(hour in 1:24){
if(length(grep(sprintf("^%d",hour),dat[head[month.i]+hour+adjust,1]))!=1){
adjust.ok = FALSE
break
}
}
if(adjust.ok)break
}
if(!adjust.ok){
print(sprintf("==ERROR==: fail to find correct time column at %d.%d in %s.",year,month,filename))
print(sprintf("   [^%d*]!= [%s]",hour,dat[head[month.i]+hour,1]))
break
}
#data check
field = dat[head[month.i]+1:24+adjust,2:(2*max(days)+1)]
numeric_check = (is.na(apply(field,c(1,2),as.numeric)) & field!="")
if(any(numeric_check)){
print(sprintf("==ERROR==: numeric check find incorrect field at %d.%d in %s.",year,month,filename))
break
}
for(day in days){
jday = as.integer(as.Date(sprintf("%04d-%02d-%02d",year,month,day))-as.Date(sprintf("%04d-01-01",year)))+1
table = rbind(table,data.frame(year=rep(year,24),month=rep(month,24),day=rep(day,24),jday=rep(jday,24),hour=1:24,
level = field[1:24,day*2-1],
flow = field[1:24,day*2]))
}
}
date = as.Date(sprintf("%04d-%02d-%02d",table$year,table$month,table$day))
plot(date)
max(date)
write.csv(table,sprintf("%s.csv",path))
as.Date("2021-02-03")
class(as.Date("2021-02-03"))
class(as.Date("2021/02/03"))
(as.Date("2021/02/03"))
as.Date("2021/02/03")
as.Date("2021.02.03")
as.Date("2021.02/03")
as.Date("2021/02/03")
?as.Date
date - as.Date("2021/02/03")
plot(date,table$flow)
plot(date,table$flow,type="l",xlim=as.Date(c("2010-01-01","2015-01-01")))
plot(date,table$flow,type="l",xlim=as.Date(c("2015-01-01","2020-01-01")))
for(i in 2015:2020){
lines(rep(as.Date(sprintf("%d-04-01",i)),2),c(-100,1000))
}
plot(date,table$flow,type="l",xlim=as.Date(c("2015-01-01","2020-01-01")),col="blue",lwd=2)
for(i in 2015:2020){
lines(rep(as.Date(sprintf("%d-04-01",i)),2),c(-100,1000))
}
plot(date,table$flow,type="l",xlim=as.Date(c("2013-01-01","2021-01-01")),col="blue",lwd=2)
for(i in 2015:2020){
lines(rep(as.Date(sprintf("%d-04-01",i)),2),c(-100,1000))
}
plot(date,table$flow,type="l",xlim=as.Date(c("2013-01-01","2021-01-01")),col="blue",lwd=2)
for(i in 2013:2021){
lines(rep(as.Date(sprintf("%d-04-01",i)),2),c(-100,1000))
}
plot(table$level,table$flow)
plot(date,table$flow,type="l",xlim=as.Date(c("2013-01-01","2021-01-01")),col="blue",lwd=2)
for(i in 2013:2021){
lines(rep(as.Date(sprintf("%d-04-01",i)),2),c(-100,1000))
}
plot(date,table$flow,type="l",xlim=as.Date(c("1987-01-01","2000-01-01")),col="blue",lwd=2)
for(i in 2013:2021){
lines(rep(as.Date(sprintf("%d-04-01",i)),2),c(-100,1000))
}
for(i in 1987:2021){
lines(rep(as.Date(sprintf("%d-04-01",i)),2),c(-100,1000))
}
plot(date,table$flow,type="l",xlim=as.Date(c("1990-01-01","2000-01-01")),col="blue",lwd=2)
for(i in 1987:2021){
lines(rep(as.Date(sprintf("%d-04-01",i)),2),c(-100,1000))
}
plot(date,table$flow,type="l",xlim=as.Date(c("1993-01-01","1994-01-01")),col="blue",lwd=2)
for(i in 1987:2021){
lines(rep(as.Date(sprintf("%d-04-01",i)),2),c(-100,1000))
}
plot(date,table$flow,type="l",xlim=as.Date(c("1992-01-01","1993-01-01")),col="blue",lwd=2)
for(i in 1987:2021){
lines(rep(as.Date(sprintf("%d-04-01",i)),2),c(-100,1000))
}
plot(date,table$flow,type="l",xlim=as.Date(c("1992-07-01","1992-09-01")),col="blue",lwd=2)
for(i in 1987:2021){
lines(rep(as.Date(sprintf("%d-04-01",i)),2),c(-100,1000))
}
for(i in 1987:2021){
lines(rep(as.Date(sprintf("%d-08-01",i)),2),c(-100,1000))
}
date = as.integer(as.Date(sprintf("%04d-%02d-%02d",table$year,table$month,table$day)))+(1:24)/24
plot(date,table$flow,type="l",xlim=as.Date(c("1992-07-01","1992-09-01")),col="blue",lwd=2)
for(i in 1987:2021){
lines(rep(as.Date(sprintf("%d-08-01",i)),2),c(-100,1000))
}
date = as.integer(as.Date(sprintf("%04d-%02d-%02d",table$year,table$month,table$day)))+(1:24)/24
plot(date,table$flow,type="l",xlim=as.Date(c("1992-07-28","1992-08-01")),col="blue",lwd=2)
for(i in 1987:2021){
lines(rep(as.Date(sprintf("%d-08-01",i)),2),c(-100,1000))
}
date = as.Date(sprintf("%04d-%02d-%02d",table$year,table$month,table$day)))
date = as.Date(sprintf("%04d-%02d-%02d",table$year,table$month,table$day))
date2 = as.integer(as.Date(sprintf("%04d-%02d-%02d",table$year,table$month,table$day)))+(1:24)/24
plot(date,table$flow,type="l",xlim=as.Date(c("1992-07-28","1992-08-01")),col="blue",lwd=2)
date = as.Date(sprintf("%04d-%02d-%02d",table$year,table$month,table$day))
date2 = as.integer(as.Date(sprintf("%04d-%02d-%02d",table$year,table$month,table$day)))+(1:24)/24
plot(date,table$flow,type="n",xlim=as.Date(c("1992-07-28","1992-08-01")),col="blue",lwd=2)
lines(date2,table$flow,col="blue",lwd=2)
plot(date,table$flow,type="n",xlim=as.Date(c("1992-07-28","1992-08-01")))
lines(date2,table$flow,col="blue",lwd=2)
?plot
plot(date,table$flow,type="n",xlim=as.Date(c("1992-07-28","1992-08-01")))
axis(1, date, format(date, "%b %d"), cex.axis = .7)
plot(date,table$flow,type="n",xlim=as.Date(c("1992-07-28","1992-08-01")),xaxt="n")
axis(1, date, format(date, "%b %d"), cex.axis = .7)
axis(1, date, format(date, "%b/%d"), cex.axis = .7)
plot(date,table$flow,type="n",xlim=as.Date(c("1992-07-28","1992-08-01")),xaxt="")
axis(1, date, format(date, "%b/%d"), cex.axis = 1.0)
plot(date,table$flow,type="n",xlim=as.Date(c("1992-07-28","1992-08-01")),xaxt="n")
axis(1, date, format(date, "%b/%d"), cex.axis = 1.0)
lines(date2,table$flow,col="blue",lwd=2)
table$hour
date = as.Date(sprintf("%04d-%02d-%02d",table$year,table$month,table$day))
date2 = as.integer(as.Date(sprintf("%04d-%02d-%02d",table$year,table$month,table$day)))+(1:24)/24
plot(date,table$flow,type="n",xlim=as.Date(c("1992-07-30","1992-08-03")),xaxt="n")
axis(1, date, format(date, "%b/%d"), cex.axis = 1.0)
lines(date2,table$flow,col="blue",lwd=2)
for(i in 1987:2021){
lines(rep(as.Date(sprintf("%d-08-01",i)),2),c(-100,1000))
}
date = as.Date(sprintf("%04d-%02d-%02d",table$year,table$month,table$day))
date2 = as.integer(as.Date(sprintf("%04d-%02d-%02d",table$year,table$month,table$day)))+(1:24)/24
plot(date,table$flow,type="n",xlim=as.Date(c("1987-01-01","1997-01-01")),xaxt="n")
axis(1, date, format(date, "%b/%d"), cex.axis = 1.0)
lines(date2,table$flow,col="blue",lwd=2)
for(i in 1987:2021){
lines(rep(as.Date(sprintf("%d-04-01",i)),2),c(-100,1000))
}
axis(1, date, format(date, "%Y.%b"), cex.axis = 1.0)
axis(1, date, format(date, "%y.%b"), cex.axis = 1.0)
start.date = as.Date("1987-01-01")
end.date = as.Date("1997-01-01")
date2 = as.integer(as.Date(sprintf("%04d-%02d-%02d",table$year,table$month,table$day)))+(1:24)/24
plot(date,table$flow,type="n",xlim=c(start.date,end.date),xaxt="n")
if(as.integer(end.date-start.date)>90){
axis(1, date, format(date, "%y.%b"), cex.axis = 1.0)
}else{
axis(1, date, format(date, "%b/%d"), cex.axis = 1.0)
}
lines(date2,table$flow,col="blue",lwd=2)
for(i in 1987:2021){
lines(rep(as.Date(sprintf("%d-04-01",i)),2),c(-100,1000))
}
axis(1, date, format(date, "%Y.%b"), cex.axis = 1.0)
start.date = as.Date("1987-01-01")
end.date = as.Date("1997-01-01")
date2 = as.integer(as.Date(sprintf("%04d-%02d-%02d",table$year,table$month,table$day)))+(1:24)/24
plot(date,table$flow,type="n",xlim=c(start.date,end.date),xaxt="n")
if(as.integer(end.date-start.date)>90){
axis(1, date, format(date, "%Y.%b"), cex.axis = 1.0)
for(i in 1987:2021){
lines(rep(as.Date(sprintf("%d-04-01",i)),2),c(-100,1000))
}
}else{
axis(1, date, format(date, "%b/%d"), cex.axis = 1.0)
}
lines(date2,table$flow,col="blue",lwd=2)
table %>% mutate(date =  as.Date(sprintf("%04d-%02d-%02d",table$year,table$month,table$day)), datetime=  as.integer(as.Date(sprintf("%04d-%02d-%02d",table$year,table$month,table$day)))+(1:24)/24)
require(tidyverse)
table = table %>% mutate(date =  as.Date(sprintf("%04d-%02d-%02d",table$year,table$month,table$day)), datetime=  as.integer(as.Date(sprintf("%04d-%02d-%02d",table$year,table$month,table$day)))+(1:24)/24)
master = table %>% mutate(date =  as.Date(sprintf("%04d-%02d-%02d",table$year,table$month,table$day)), datetime=  as.integer(as.Date(sprintf("%04d-%02d-%02d",table$year,table$month,table$day)))+(1:24)/24)
names(master)
start.date = as.Date("1987-01-01")
end.date = as.Date("1997-01-01")
table = master %>% filter(start.date<=date & date<=end.date)
plot(table$date,table$flow,type="n",xlim=c(start.date,end.date),xaxt="n")
if(as.integer(end.date-start.date)>90){
axis(1, table$date, format(date, "%Y.%b"), cex.axis = 1.0)
for(i in 1987:2021){
lines(rep(as.Date(sprintf("%d-04-01",i)),2),c(-100,1000))
}
}else{
axis(1, table$date, format(date, "%b/%d"), cex.axis = 1.0)
}
lines(table$datetime,table$flow,col="blue",lwd=2)
table = master %>% filter(start.date<=date & date<=end.date)
plot(table$date,table$flow,type="n",xlim=c(start.date,end.date),xaxt="n")
if(as.integer(end.date-start.date)>90){
axis(1, table$date, format(table$date, "%Y.%b"), cex.axis = 1.0)
for(i in 1987:2021){
lines(rep(as.Date(sprintf("%d-04-01",i)),2),c(-100,1000))
}
}else{
axis(1, table$date, format(date, "%b/%d"), cex.axis = 1.0)
}
lines(table$datetime,table$flow,col="blue",lwd=2)
start.date = as.Date("1987-01-01")
end.date = as.Date("2000-01-01")
table = master %>% filter(start.date<=date & date<=end.date)
plot(table$date,table$flow,type="n",xlim=c(start.date,end.date),xaxt="n")
if(as.integer(end.date-start.date)>90){
axis(1, table$date, format(table$date, "%Y.%b"), cex.axis = 1.0)
for(i in 1987:2021){
lines(rep(as.Date(sprintf("%d-04-01",i)),2),c(-100,1000))
}
}else{
axis(1, table$date, format(date, "%b/%d"), cex.axis = 1.0)
}
lines(table$datetime,table$flow,col="blue",lwd=2)
?axis
table$date
table$date
table$date
table = master %>% filter(start.date<=date & date<=end.date)
plot(table$date,table$flow,type="n",xlim=c(start.date,end.date),xaxt="n")
if(as.integer(end.date-start.date)>=365*2){
pos = as.Date(sprintf("%d-01-01",table$year))
axis(1, pos, format(pos, "%Y"), cex.axis = 1.0)
for(i in 1987:2021){
lines(rep(pos,2),c(-100,1000))
}
}else{
axis(1, table$date, format(date, "%b/%d"), cex.axis = 1.0)
}
lines(table$datetime,table$flow,col="blue",lwd=2)
table = master %>% filter(start.date<=date & date<=end.date)
plot(table$date,table$flow,type="n",xlim=c(start.date,end.date),xaxt="n")
if(as.integer(end.date-start.date)>=365*2){
pos = as.Date(sprintf("%d-01-01",table$year))
axis(1, pos, format(pos, "%Y"), cex.axis = 1.0)
for(i in pos){
lines(rep(i,2),c(-100,1000))
}
}else{
axis(1, table$date, format(date, "%b/%d"), cex.axis = 1.0)
}
lines(table$datetime,table$flow,col="blue",lwd=2)
?axis
start.date = as.Date("1987-01-01")
end.date = as.Date("1988-01-01")
table = master %>% filter(start.date<=date & date<=end.date)
plot(table$date,table$flow,type="n",xlim=c(start.date,end.date),xaxt="n")
if(as.integer(end.date-start.date)>=365*2){
pos = as.Date(sprintf("%d-01-01",table$year))
axis(1, pos, format(pos, "%Y"), cex.axis = 1.0)
for(i in pos){
lines(rep(i,2),c(-100,1000))
}
}else if(as.integer(end.date-start.date)>=120){
pos = as.Date(sprintf("%d-%d-01",table$year,table$month))
axis(1, pos, format(pos, "%Y.%d"), cex.axis = 1.0)
for(i in pos){
lines(rep(i,2),c(-100,1000))
}
}else{
axis(1, table$date, format(date, "%b/%d"), cex.axis = 1.0)
}
lines(table$datetime,table$flow,col="blue",lwd=2)
table = master %>% filter(start.date<=date & date<=end.date)
plot(table$date,table$flow,type="n",xlim=c(start.date,end.date),xaxt="n")
if(as.integer(end.date-start.date)>=365*2){
pos = as.Date(sprintf("%d-01-01",table$year))
axis(1, pos, format(pos, "%Y"), cex.axis = 1.0)
for(i in pos){
lines(rep(i,2),c(-100,1000))
}
}else if(as.integer(end.date-start.date)>=120){
pos = as.Date(sprintf("%d-%d-01",table$year,table$month))
axis(1, pos, format(pos, "%Y.%b"), cex.axis = 1.0)
for(i in pos){
lines(rep(i,2),c(-100,1000))
}
}else{
axis(1, table$date, format(date, "%b/%d"), cex.axis = 1.0)
}
lines(table$datetime,table$flow,col="blue",lwd=2)
start.date = as.Date("1987-01-01")
end.date = as.Date("1987-06-01")
table = master %>% filter(start.date<=date & date<=end.date)
plot(table$date,table$flow,type="n",xlim=c(start.date,end.date),xaxt="n")
if(as.integer(end.date-start.date)>=365*2){
pos = as.Date(sprintf("%d-01-01",table$year))
axis(1, pos, format(pos, "%Y"), cex.axis = 1.0)
for(i in pos){
lines(rep(i,2),c(-100,1000))
}
}else if(as.integer(end.date-start.date)>=120){
pos = as.Date(sprintf("%d-%d-01",table$year,table$month))
axis(1, pos, format(pos, "%Y.%b"), cex.axis = 1.0)
for(i in pos){
lines(rep(i,2),c(-100,1000))
}
}else{
axis(1, table$date, format(date, "%b/%d"), cex.axis = 1.0)
}
lines(table$datetime,table$flow,col="blue",lwd=2)
start.date = as.Date("1987-04-01")
end.date = as.Date("1987-06-01")
table = master %>% filter(start.date<=date & date<=end.date)
plot(table$date,table$flow,type="n",xlim=c(start.date,end.date),xaxt="n")
if(as.integer(end.date-start.date)>=365*2){
pos = as.Date(sprintf("%d-01-01",table$year))
axis(1, pos, format(pos, "%Y"), cex.axis = 1.0)
for(i in pos){
lines(rep(i,2),c(-100,1000))
}
}else if(as.integer(end.date-start.date)>=120){
pos = as.Date(sprintf("%d-%d-01",table$year,table$month))
axis(1, pos, format(pos, "%Y.%b"), cex.axis = 1.0)
for(i in pos){
lines(rep(i,2),c(-100,1000))
}
}else{
axis(1, table$date, format(date, "%b/%d"), cex.axis = 1.0)
}
lines(table$datetime,table$flow,col="blue",lwd=2)
table = master %>% filter(start.date<=date & date<=end.date)
plot(table$date,table$flow,type="n",xlim=c(start.date,end.date),xaxt="n")
if(as.integer(end.date-start.date)>=365*2){
pos = as.Date(sprintf("%d-01-01",table$year))
axis(1, pos, format(pos, "%Y"), cex.axis = 1.0)
for(i in pos){
lines(rep(i,2),c(-100,1000))
}
}else if(as.integer(end.date-start.date)>=120){
pos = as.Date(sprintf("%d-%d-01",table$year,table$month))
axis(1, pos, format(pos, "%Y.%b"), cex.axis = 1.0)
for(i in pos){
lines(rep(i,2),c(-100,1000))
}
}else{
axis(1, table$date, format(table$date, "%b/%d"), cex.axis = 1.0)
}
lines(table$datetime,table$flow,col="blue",lwd=2)
start.date = as.Date("1987-04-01")
end.date = as.Date("1987-05-01")
table = master %>% filter(start.date<=date & date<=end.date)
plot(table$date,table$flow,type="n",xlim=c(start.date,end.date),xaxt="n")
if(as.integer(end.date-start.date)>=365*2){
pos = as.Date(sprintf("%d-01-01",table$year))
axis(1, pos, format(pos, "%Y"), cex.axis = 1.0)
for(i in pos){
lines(rep(i,2),c(-100,1000))
}
}else if(as.integer(end.date-start.date)>=120){
pos = as.Date(sprintf("%d-%d-01",table$year,table$month))
axis(1, pos, format(pos, "%Y.%b"), cex.axis = 1.0)
for(i in pos){
lines(rep(i,2),c(-100,1000))
}
}else{
axis(1, table$date, format(table$date, "%b/%d"), cex.axis = 1.0)
}
lines(table$datetime,table$flow,col="blue",lwd=2)
start.date = as.Date("1987-05-01")
end.date = as.Date("1987-06-01")
table = master %>% filter(start.date<=date & date<=end.date)
plot(table$date,table$flow,type="n",xlim=c(start.date,end.date),xaxt="n")
if(as.integer(end.date-start.date)>=365*2){
pos = as.Date(sprintf("%d-01-01",table$year))
axis(1, pos, format(pos, "%Y"), cex.axis = 1.0)
for(i in pos){
lines(rep(i,2),c(-100,1000))
}
}else if(as.integer(end.date-start.date)>=120){
pos = as.Date(sprintf("%d-%d-01",table$year,table$month))
axis(1, pos, format(pos, "%Y.%b"), cex.axis = 1.0)
for(i in pos){
lines(rep(i,2),c(-100,1000))
}
}else{
axis(1, table$date, format(table$date, "%b/%d"), cex.axis = 1.0)
}
lines(table$datetime,table$flow,col="blue",lwd=2)
plot.level(master,start.date,end.date)
start.date = as.Date("1987-05-01")
end.date = as.Date("1987-06-01")
plot.level(master,start.date,end.date)
start.date = as.Date("1987-05-01")
end.date = as.Date("1987-06-01")
plot.level(master,start.date,end.date)
# plot ---------------------------------------------------------------------
plot.level = function(data, start_date, end_date){
table = data %>% filter(start.date<=date & date<=end.date)
plot(table$date,table$flow,type="n",xlim=c(start.date,end.date),xaxt="n")
if(as.integer(end.date-start.date)>=365*2){
pos = as.Date(sprintf("%d-01-01",table$year))
axis(1, pos, format(pos, "%Y"), cex.axis = 1.0)
for(i in pos){
lines(rep(i,2),c(-100,1000))
}
}else if(as.integer(end.date-start.date)>=120){
pos = as.Date(sprintf("%d-%d-01",table$year,table$month))
axis(1, pos, format(pos, "%Y.%b"), cex.axis = 1.0)
for(i in pos){
lines(rep(i,2),c(-100,1000))
}
}else{
axis(1, table$date, format(table$date, "%b/%d"), cex.axis = 1.0)
}
lines(table$datetime,table$flow,col="blue",lwd=2)
}
start.date = as.Date("1987-05-01")
end.date = as.Date("1987-06-01")
plot.level(master,start.date,end.date)
start.date = as.Date("1987-05-15")
end.date = as.Date("1987-05-20")
plot.level(master,start.date,end.date)
plot.level(master,start.date,end.date)
plot.level(master,start.date,end.date)
#please put the directory path of csv files!
load_butokama_flow=function(path){
numberOfDays <- function(year,month) {
date = as.Date(sprintf("%04d-%02d-01",year,month))
m <- format(date, format="%m")
while (format(date, format="%m") == m) {
date <- date + 1
}
return(as.integer(format(date - 1, format="%d")))
}
table = NULL
files= dir(path)
for(filename in files){
print(sprintf("loading %s...",filename))
if(length(grep("\\d\\d\\d\\dbuto.csv",filename))){
start_year = as.integer(substr(filename,1,4))
start_month = 1
month_num = 12
}else if(length(grep("\\d\\d\\d\\dbuto_\\d.csv",filename))){
start_year = as.integer(substr(filename,1,4))
start_month = 3*as.integer(substr(filename,10,10))-2
month_num = 3
}else if(length(grep("\\d\\d\\d\\dbuto_\\d\\d\\d\\d.csv",filename))){
start_year = as.integer(substr(filename,1,4))
start_month = 4
month_num = 12
}else if(length(grep("\\d\\d\\d\\dbuto_\\d\\d\\d\\dEnd.csv",filename))){
start_year = as.integer(substr(filename,1,4))
start_month = 4
month_num = NA
}else{
print(sprintf("==ERROR==: unknown file name format: %s.",filename))
next
}
dat = read.csv(paste0(path,"/",filename),fileEncoding = "SJIS",header=FALSE)
#remove empty column
while(all(dat[,1]==""| is.na(dat[,1]))){
dat= dat[,-1]
}
head = integer(0)
for(i in 1:nrow(dat)){
if(length(grep("水位",dat[i,]))>27){
head = c(head,i)
}
}
if(is.na(month_num) || length(head)!=month_num){
print(sprintf("==ERROR==: head line num is %d instead of %d in %s.",length(head),month_num,filename))
print(paste0("   head line: ",paste(head,collapse = ", ")))
}
for(month.i in 1:length(head)){
success=TRUE
year = start_year + as.integer((start_month+month.i-2)/12)
month = (start_month+month.i-2)%%12+1
days = 1:numberOfDays(year,month)
#month check
adjust = 0
for(adjust in 0:3){
adjust.ok = TRUE
for(hour in 1:24){
if(length(grep(sprintf("^%d",hour),dat[head[month.i]+hour+adjust,1]))!=1){
adjust.ok = FALSE
break
}
}
if(adjust.ok)break
}
if(!adjust.ok){
print(sprintf("==ERROR==: fail to find correct time column at %d.%d in %s.",year,month,filename))
print(sprintf("   [^%d*]!= [%s]",hour,dat[head[month.i]+hour,1]))
break
}
#data check
field = dat[head[month.i]+1:24+adjust,2:(2*max(days)+1)]
numeric_check = (is.na(apply(field,c(1,2),as.numeric)) & field!="")
if(any(numeric_check)){
print(sprintf("==ERROR==: numeric check find incorrect field at %d.%d in %s.",year,month,filename))
break
}
for(day in days){
jday = as.integer(as.Date(sprintf("%04d-%02d-%02d",year,month,day))-as.Date(sprintf("%04d-01-01",year)))+1
table = rbind(table,data.frame(year=rep(year,24),month=rep(month,24),day=rep(day,24),jday=rep(jday,24),hour=1:24,
level = field[1:24,day*2-1],
flow = field[1:24,day*2]))
}
}
}
write.csv(table,sprintf("%s.csv",path))
}
#data load
table = load_butokama_flow("D:/hmito/Downloads/buto/data")
140*61.4+21*94.2+24*90.6
12748/7*10
12748/7*10/1.15
